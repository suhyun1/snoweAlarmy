# 교내 공지사항 telegram 알림봇
채널 링크:

### 동기
자주 깜빡하는 나를 위해 매우 중요한 공지(전공 신청, 복학 신청 공지 등)을 놓치지 않고 확인하고자 제작하였다.(졸업이 걸려있다...) 매번 공지를 보기 위해 로그인을 해야 하는 번거로움도 해결하고자 했다.<br/>
뿐만 아니라 웹페이지 업데이트를 알려주는 알림봇은 응용할 분야가 많을 것 같아 이번 기회에 만들었다. 

### 기능 설명(로직 설명)
- 채널에 접속하면 관리자인 봇인 오늘 올라온 공지를 매일 오후 8시 알림해준다.
- 교내 공지사항은 로그인해야 읽을 수 있다. 따라서 환경변수 USER_ID, USER_PW에 아이디와 비밀번호를 저장해두어 로그인 후 데이터를 가져온다.
- ~~30분 간격으로 게시물 목록을 읽어오면서, 이전에 저장한 데이터와 비교하여 업데이트된 경우 새로운 게시물에 대한 telegram 메시지를 전송한다.~~
- ~~학교 서버의 부하를 줄이기 위해 30분에 한번씩 수행하도록 하였다. 또한 교직원들이 일하지 않는 밤 시간과 주말은 수행하지 않도록 하였다.~~
- 원래 30분 간격으로 글 목록을 읽어오려 했으나, 하루 올라오는 게시글이 평균 4~10개로 많지 않고 항상 중요한 공지만 있는 것이 아니기 때문에 하루에 한 번 오후 11시에 알람을 제공하기로 하였다.


### 사용 기술
- nodejs v.10.15.2
- npm 모듈
    - node-telegram-bot-api
    - puppeteer
    - dotenv

#### puppeteer
Headless 브라우저(크롬)을 쉽게 사용할 수 있도록 Google에서 공개한 Node.js 라이브러리로, 실제로 브라우저 창을 띄우지 않고 백그라운드에서 작동할 수 있게 해준다.<br/>
특정 페이지에 접속하고 렌더링 되는 과정 후 데이터를 수집할 수 있어 선택하였고,<br/>
교내 공지를 확인하려면 로그인이 필요한데, 이 과정을 수행하기 위해 선택하였다.

<br/>

### 참고
- [유용한 Javascript 웹 스크래퍼: Puppeteer](https://velog.io/@filoscoder/%EC%9C%A0%EC%9A%A9%ED%95%9C-Js-%EC%9B%B9-%EC%8A%A4%ED%81%AC%EB%9E%98%ED%8D%BC-Puppeteer-rdk49nmlyc)